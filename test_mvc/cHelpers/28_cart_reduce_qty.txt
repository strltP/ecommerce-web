     //---------Reduce QTY-------------
     var orderDetails = _context.OrderDetails.Where(x => x.OrderId == orderId).ToList();

     var productsIds = orderDetails.Select(x => x.ProductId);

     var products = _context.Products.Where(x => productsIds.Contains(x.Id)).ToList();

     foreach (var item in products)
     {
         item.Qty = item.Qty- orderDetails.FirstOrDefault(x => x.ProductId == item.Id).Count;
     }

     _context.Products.UpdateRange(products);
     //---------------------------------