 [Authorize]
 [HttpPost]
 public IActionResult ApplyCouponCode([FromForm] string couponCode)
 {
     var order = new Models.db.Order();

     var coupon = _context.Coupons.FirstOrDefault(c => c.Code == couponCode);

     if (coupon != null)
     {
         order.CouponCode = coupon.Code;
         order.CouponDiscount = coupon.Discount;
     }
     else
     {
         ViewData["Products"] = GetProductsinCart();
         TempData["message"] = "Coupon not exitst";
         return View("Checkout", order);
     }

     var shipping = _context.Settings.First().Shipping;
     if (shipping != null)
     {
         order.Shipping = shipping;
     }

     ViewData["Products"] = GetProductsinCart();
     return View("Checkout", order);
 }